jQuery.fn.extend({arrowTip:function(b){var c="at"+parseInt(Math.random()*100000);console.log(c);var a=$(this);b=b||"";var d=$("<div id="+c+' class="arrowTip" style="display:none;padding:5px 10px;width:230px;position:absolute;background:white;border:1px solid #e1e1e1;"><img src="http://static.baixing.net/images/float_tip_arrow.gif" style="position:absolute;display:block;top:-10px;" />'+b+"</div>");d.appendTo("body");d.offset({top:a.offset().top+$(document).scrollTop()+a.height(),left:a.offset().left+$(document).scrollLeft()}).fadeIn(function(){$("body").click(function(e){$(this).unbind("click");d.hide().offset({top:3,left:0});return false;});});},attachFollow:function(a){if(typeof(a)=="object"){jQuery.fn.extend(a);}return jQuery(this).click(function(){var c=jQuery(this);var b=jQuery.profile().mobi;if(/^\d{11}$/.exec(b)){if(c.attr("followed")=="1"){c.unfollow(b);}else{c.follow(b);}}else{c.nomobile();}return false;});},onfollow:function(){},onunfollow:function(){},afterNomobile:function(){},follow:function(b){var c=jQuery(this);var a="http://www.baixing.com/follow/"+c.attr("type")+"/?mobile="+b+"&city="+c.attr("city")+"&cate="+c.attr("cate")+(c.attr("label")?"&label="+encodeURIComponent(c.attr("label")):"")+(c.attr("query")?"&query="+encodeURIComponent(c.attr("query")):"");jQuery.getScript(a);c.attr("followed","1");c.find("img").attr("src","http://static.baixing.net/images/button_follow_"+(c.attr("type")=="cate"?"2":"1")+(c.attr("type")=="tag"?"_s":"")+".png");c.onfollow();},unfollow:function(b){var c=jQuery(this);if(c.hasClass("cantUnfollow")){return;}var a="http://www.baixing.com/follow/unfollow/"+c.attr("type")+"/?mobile="+b+"&city="+c.attr("city")+"&cate="+c.attr("cate")+(c.attr("label")?"&label="+encodeURIComponent(c.attr("label")):"")+(c.attr("query")?"&query="+encodeURIComponent(c.attr("query")):"");jQuery.getScript(a);c.attr("followed","0");c.find("img").attr("src","http://static.baixing.net/images/"+(c.attr("nosms")?"button_follow_0.png":"listing_notify.gif"));c.onunfollow();},nomobile:function(){var c=jQuery(this);c.afterNomobile();var d=new Array();d.like="免费记录此条信息";d.exps="免费获得改价信息";d.imgs="免费向卖家索取照片";d.contact="获取此信息的联系方式";d.intv="免费向雇主发送你的联系方式";d.other="有新信息时将收到免费短信通知";var b=(d[c.attr("label")]!=null)?d[c.attr("label")]:d.other;var a=jQuery('<form id="nomobile" class="nomob block form" style="padding:5px 10px;background:white;border:1px solid #e1e1e1;display:none;width:230px;position:absolute;"><img src="http://static.baixing.net/images/float_tip_arrow.gif" style="position:absolute;display:block;top:-10px;" /><small>输入手机号，'+b+'：<br /><input type="text" class="input" name="mobile" size="16" value="" /> <input type="submit" value="提交" /></small></form>');jQuery(".nomob").fadeOut();a.appendTo("body");a.offset({top:c.offset().top+jQuery(document).scrollTop()+c.height()+18,left:c.offset().left+jQuery(document).scrollLeft()-20}).submit(function(){var e=a.find('input[name="mobile"]').val();if(!e.match(/^1(3|4|5|8)\d{9}$/)){alert("手机号码不正确！");return false;}a.fadeOut();jQuery.profile().mobi=e;c.follow(e);return false;}).fadeIn(function(){jQuery("body").click(function(f){var e=f.target;while(e.nodeName.toUpperCase()!="BODY"){e=e.parentNode;if(e.id=="nomobile"){return true;}}jQuery(this).unbind("click");a.unbind("submit").hide().offset({top:3,left:0});});});}});jQuery.extend({profile:function(a){if(typeof(a)=="object"){writeCookie("__profile",a);}else{a=/^{.*}$/.exec(readCookie("__profile"))?jQuery.parseJSON(readCookie("__profile")):{};}return a;}});